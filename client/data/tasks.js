export const MECHANIC = {
  SCRIPTURE_MEMORY: 'SCRIPTURE_MEMORY',
  SLING: 'SLING',
  COLLECT: 'COLLECT',
  DRAG_PLACE: 'DRAG_PLACE',
  GUARD: 'GUARD',
  RAPID_TAP: 'RAPID_TAP',
  QUIZ: 'QUIZ',
  MATCH_PAIR: 'MATCH_PAIR',
  HOLD: 'HOLD',
};

export const TASK_TYPE = {
  STATION: 'station',
  FREE_ROAM: 'free_roam',
};

export const TASKS = [
  {
    id: 'scripture_memory',
    title: 'Scripture Memory',
    synopsis: 'Recite Joshua 1:8 from memory. Type what you remember and score 80% or higher to pass.',
    reference: 'Joshua 1:8',
    mechanic: MECHANIC.SCRIPTURE_MEMORY,
    taskType: TASK_TYPE.FREE_ROAM,
    points: { alive: 80, dead: 48 },
    difficulty: 'medium',
    timeLimit: 0,
    config: {
      verseText: 'This Book of the Law shall not depart from your mouth, but you shall meditate on it day and night, so that you may be careful to do according to all that is written in it. For then you will make your way prosperous, and then you will have good success.',
      reference: 'Joshua 1:8',
      accuracy: 0.80,
    },
  },
  {
    id: 'david_and_goliath',
    title: 'David & Goliath',
    synopsis: 'Sling a stone at Goliath! Trace a circular arc and release at the right moment.',
    reference: '1 Samuel 17:49',
    mechanic: MECHANIC.SLING,
    taskType: TASK_TYPE.FREE_ROAM,
    points: { alive: 60, dead: 36 },
    difficulty: 'medium',
    timeLimit: 30,
    config: {
      attempts: 3,
      targetRadius: 60,
      minVelocity: 300,
    },
  },
  {
    id: 'pauls_belongings',
    title: "Paul's Belongings",
    synopsis: "Paul left his cloak and scrolls behind. Collect all three items before time runs out.",
    reference: '2 Timothy 4:13',
    mechanic: MECHANIC.COLLECT,
    taskType: TASK_TYPE.STATION,
    points: { alive: 120, dead: 72 },
    difficulty: 'easy',
    timeLimit: 20,
    config: {
      items: ['Cloak', 'Parchments', 'Books'],
    },
  },
  {
    id: 'lamp_on_lampstand',
    title: 'Lamp on a Lampstand',
    synopsis: "Don't hide your light! Drag the lamp onto the lampstand to let it shine.",
    reference: 'Matthew 5:15',
    mechanic: MECHANIC.DRAG_PLACE,
    taskType: TASK_TYPE.STATION,
    points: { alive: 100, dead: 60 },
    difficulty: 'easy',
    timeLimit: 30,
    config: {
      snapTolerance: 60,
    },
  },
  {
    id: 'protect_the_sheep',
    title: 'Protect the Sheep',
    synopsis: 'Wolves are coming! Tap each wolf before it reaches the flock. Three misses and the sheep scatter.',
    reference: 'John 10:10–11',
    mechanic: MECHANIC.GUARD,
    taskType: TASK_TYPE.STATION,
    points: { alive: 150, dead: 90 },
    difficulty: 'hard',
    timeLimit: 0,
    config: {
      waveDuration: 25000,
      maxMisses: 3,
    },
  },
  {
    id: 'feeding_five_thousand',
    title: 'Feeding of the 5000',
    synopsis: 'Multiply the loaves and fish! Tap the basket as fast as you can to feed the crowd.',
    reference: 'John 6:9',
    mechanic: MECHANIC.RAPID_TAP,
    taskType: TASK_TYPE.FREE_ROAM,
    points: { alive: 50, dead: 30 },
    difficulty: 'easy',
    timeLimit: 10,
    config: {
      targetTaps: 30,
    },
  },
  {
    id: 'ten_commandments',
    title: 'The Ten Commandments',
    synopsis: 'God gave Moses the law. Can you recall the commandments? Answer all questions correctly.',
    reference: 'Exodus 20',
    mechanic: MECHANIC.QUIZ,
    taskType: TASK_TYPE.FREE_ROAM,
    points: { alive: 70, dead: 42 },
    difficulty: 'medium',
    timeLimit: 60,
    config: {
      questions: [
        {
          prompt: 'What is the first commandment?',
          options: [
            'You shall have no other gods before me.',
            'You shall not make idols.',
            'You shall not murder.',
            'Honor your father and mother.',
          ],
          answerIndex: 0,
        },
        {
          prompt: 'Which commandment forbids taking the LORD\'s name in vain?',
          options: ['Second', 'Third', 'Fourth', 'Fifth'],
          answerIndex: 1,
        },
        {
          prompt: 'The fourth commandment commands us to remember which day?',
          options: ['Monday', 'Friday', 'The Sabbath', 'Sunday'],
          answerIndex: 2,
        },
        {
          prompt: 'Which commandment forbids coveting your neighbor\'s house?',
          options: ['Eighth', 'Ninth', 'Tenth', 'Seventh'],
          answerIndex: 2,
        },
        {
          prompt: 'Which commandment says "You shall not commit adultery"?',
          options: ['Fifth', 'Sixth', 'Seventh', 'Eighth'],
          answerIndex: 2,
        },
      ],
    },
  },
  {
    id: 'fruits_of_spirit',
    title: 'Fruits of the Spirit',
    synopsis: 'Match each fruit of the Spirit to its meaning before time runs out.',
    reference: 'Galatians 5:22–23',
    mechanic: MECHANIC.MATCH_PAIR,
    taskType: TASK_TYPE.FREE_ROAM,
    points: { alive: 60, dead: 36 },
    difficulty: 'medium',
    timeLimit: 60,
    config: {
      pairs: [
        { term: 'Love', definition: 'Selfless care for others' },
        { term: 'Joy', definition: 'Delight that transcends circumstances' },
        { term: 'Peace', definition: 'Tranquility and freedom from anxiety' },
        { term: 'Patience', definition: 'Enduring hardship without complaint' },
        { term: 'Kindness', definition: 'Goodwill and gentle helpfulness' },
        { term: 'Faithfulness', definition: 'Loyal and trustworthy' },
      ],
    },
  },
  {
    id: 'manna_wilderness',
    title: 'Manna in the Wilderness',
    synopsis: 'God rained bread from heaven! Collect the manna pieces before they disappear.',
    reference: 'Exodus 16:4',
    mechanic: MECHANIC.COLLECT,
    taskType: TASK_TYPE.STATION,
    points: { alive: 110, dead: 66 },
    difficulty: 'easy',
    timeLimit: 15,
    config: {
      items: ['Manna piece', 'Manna piece', 'Manna piece'],
    },
  },
  {
    id: 'walls_of_jericho',
    title: 'Walls of Jericho',
    synopsis: 'March and shout! Tap the wall repeatedly to make it crumble.',
    reference: 'Joshua 6:3–5',
    mechanic: MECHANIC.RAPID_TAP,
    taskType: TASK_TYPE.STATION,
    points: { alive: 130, dead: 78 },
    difficulty: 'medium',
    timeLimit: 12,
    config: {
      targetTaps: 50,
    },
  },
  {
    id: 'ark_of_covenant',
    title: 'Ark of the Covenant',
    synopsis: 'Carry the Ark carefully. Drag it to the designated holy place without dropping it.',
    reference: 'Joshua 3:15–16',
    mechanic: MECHANIC.DRAG_PLACE,
    taskType: TASK_TYPE.STATION,
    points: { alive: 120, dead: 72 },
    difficulty: 'medium',
    timeLimit: 30,
    config: {
      snapTolerance: 50,
    },
  },
  {
    id: 'gideons_torch',
    title: "Gideon's Torch",
    synopsis: 'Hold your torch steady! Press and hold to keep the flame burning for the Lord.',
    reference: 'Judges 7:20',
    mechanic: MECHANIC.HOLD,
    taskType: TASK_TYPE.FREE_ROAM,
    points: { alive: 65, dead: 39 },
    difficulty: 'easy',
    timeLimit: 0,
    config: {
      duration: 4,
    },
  },
  {
    id: 'fiery_furnace',
    title: 'The Fiery Furnace',
    synopsis: 'Stand firm in the fire like Shadrach, Meshach, and Abednego. Hold on without letting go.',
    reference: 'Daniel 3:17–18',
    mechanic: MECHANIC.HOLD,
    taskType: TASK_TYPE.FREE_ROAM,
    points: { alive: 75, dead: 45 },
    difficulty: 'medium',
    timeLimit: 0,
    config: {
      duration: 7,
    },
  },
  {
    id: 'noahs_animals',
    title: "Noah's Animals",
    synopsis: 'Two by two! Match the animal pairs to load them onto the ark.',
    reference: 'Genesis 7:2',
    mechanic: MECHANIC.MATCH_PAIR,
    taskType: TASK_TYPE.FREE_ROAM,
    points: { alive: 55, dead: 33 },
    difficulty: 'easy',
    timeLimit: 45,
    config: {
      pairs: [
        { term: 'Lion', definition: 'Lioness' },
        { term: 'Dove', definition: 'Dove (female)' },
        { term: 'Elephant', definition: 'Elephant (female)' },
        { term: 'Raven', definition: 'Raven (female)' },
        { term: 'Sheep', definition: 'Ewe' },
        { term: 'Ox', definition: 'Heifer' },
      ],
    },
  },
  {
    id: 'solomons_temple',
    title: "Solomon's Temple",
    synopsis: 'Build the temple as God commanded. Place each sacred object in its proper position.',
    reference: '1 Kings 6',
    mechanic: MECHANIC.DRAG_PLACE,
    taskType: TASK_TYPE.STATION,
    points: { alive: 140, dead: 84 },
    difficulty: 'hard',
    timeLimit: 45,
    config: {
      snapTolerance: 40,
    },
  },
  {
    id: 'water_from_rock',
    title: 'Water from the Rock',
    synopsis: "Strike the rock! Tap quickly to release water for God's thirsty people.",
    reference: 'Exodus 17:6',
    mechanic: MECHANIC.RAPID_TAP,
    taskType: TASK_TYPE.FREE_ROAM,
    points: { alive: 45, dead: 27 },
    difficulty: 'easy',
    timeLimit: 8,
    config: {
      targetTaps: 20,
    },
  },
  {
    id: 'the_lost_sheep',
    title: 'The Lost Sheep',
    synopsis: 'The shepherd leaves the ninety-nine! Guard the flock and keep the wolves away.',
    reference: 'Luke 15:4',
    mechanic: MECHANIC.GUARD,
    taskType: TASK_TYPE.STATION,
    points: { alive: 140, dead: 84 },
    difficulty: 'hard',
    timeLimit: 0,
    config: {
      waveDuration: 20000,
      maxMisses: 3,
    },
  },
  {
    id: 'rebuilding_wall',
    title: 'Rebuilding the Wall',
    synopsis: "Nehemiah's workers built with one hand and held a sword with the other. Answer these questions about the wall.",
    reference: 'Nehemiah 4:17',
    mechanic: MECHANIC.QUIZ,
    taskType: TASK_TYPE.FREE_ROAM,
    points: { alive: 70, dead: 42 },
    difficulty: 'medium',
    timeLimit: 60,
    config: {
      questions: [
        {
          prompt: 'Who led the rebuilding of the walls of Jerusalem?',
          options: ['Ezra', 'Nehemiah', 'Zerubbabel', 'Ezekiel'],
          answerIndex: 1,
        },
        {
          prompt: 'The enemies who mocked the rebuilding included Sanballat and whom?',
          options: ['Tobiah', 'Haman', 'Og', 'Balak'],
          answerIndex: 0,
        },
        {
          prompt: 'How many days did it take to rebuild the wall?',
          options: ['40 days', '52 days', '70 days', '100 days'],
          answerIndex: 1,
        },
        {
          prompt: 'Nehemiah 4:17 says workers held a tool in one hand and what in the other?',
          options: ['A torch', 'A stone', 'A sword', 'A horn'],
          answerIndex: 2,
        },
      ],
    },
  },
];

export function getTaskById(id) {
  return TASKS.find((t) => t.id === id) || null;
}

export function getTasksForRole(role, isAlive) {
  if (role === 'deceiver') return [];
  if (!isAlive) return TASKS.filter((t) => t.taskType === TASK_TYPE.FREE_ROAM);
  return TASKS;
}